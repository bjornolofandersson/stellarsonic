---
import { MusicMix } from '../lib/interfaces';
import Schema from '../components/playlist/Schema.astro';
import Tracks from '../components/playlist/Tracks.svelte';
import Controls from '../components/playlist/Controls.svelte';
import Post from './Post.astro';

export interface Props {
  post: MusicMix;
}

const { post } = Astro.props;
const { title, subtitle, description, image, colors } = post;

const date = new Date(post.date).toDateString();
---

<Post title={title} image={image} colors={colors} date={date}>
  <Fragment slot="head-bottom">
    <Schema {...post} />
  </Fragment>
  <slot/>
  <section slot="header-left" class="text-white mt-12 md:px-8 py-8">
    <h1 class="text-4xl font-title">{title}</h1>
    <h2 class="text-xl" style={`color: ${colors[2]}`}>{subtitle}</h2>
    <p class="text-white opacity-40 text-sm mt-8">{description}</p>
  </section>
  <section slot="header-right">
    <div class="md:-mt-40">
      <Controls client:only playlist={post} progressColor={colors[2]} />
    </div>
    <div class="mt-8 md:mt-20">
      <Tracks client:only playlist={post} />
    </div>
  </section>
</Post>
