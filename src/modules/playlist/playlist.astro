---
import { CollectionEntry } from 'astro:content';
import Playlist from './playlist.svelte';
import MenuBar from '@theme/MenuBar.svelte';
import { getSitemap } from '@lib/server';
import { Entity } from '@lib/interfaces';
import { CollectionController } from '@lib/CollectionController';

interface Props {
  entry: CollectionEntry<'mixes'>;

  page: Entity<any>;

  template: Entity<any>;
}

const { entry, page, template } = Astro.props;
const { Content } = await entry.render();

const sitemap = await getSitemap();
const entity = CollectionController.makeEntity(entry);
---

<Playlist entity={entity} page={page} template={template} client:load>
  <MenuBar sitemap={sitemap} slot="menu" />
  <Content slot="article"/>
</Playlist>
