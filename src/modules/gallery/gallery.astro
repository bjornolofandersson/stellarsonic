---
import { PageProps } from '@lib/interfaces';
import { getPagePreview } from '@lib/page';
import { getCollection } from 'astro:content';
import Gallery from './gallery.svelte';

interface Props extends PageProps<any> {}

const { entity, navigation } = Astro.props;
const gallery = entity.data.gallery;

const blogPages = await getCollection('pages', p => p.data.parent === gallery.blog);
let previews: any[] = [];
for (let page of blogPages) {
  previews.push(await getPagePreview(page as any));
}
---

<Gallery entity={entity} navigation={navigation} previews={previews} client:load />
