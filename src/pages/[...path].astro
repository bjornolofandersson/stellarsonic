---
//import { getModuleStaticPaths } from '@modules/index';
import { SitePage } from '@lib/interfaces';
import * as site from '@settings';

export async function getStaticPaths() {
  const modules = import.meta.glob('../modules/*/*.server.ts', {eager: true});

  const pages = site.pages as SitePage[];
  let paths: any[] = [];

  for (const page of pages) {
    const type = page.type;
    const module = modules[`../modules/${type}/${type}.server.ts`] as any;
    paths = paths.concat(await module.getStaticPaths(page));
  }

  return paths;
}

interface Props {
  Module: any;

  title: string;

  props: any;
}

const { title, Module, props } = Astro.props;
---

<Module title={title} {...props} />
