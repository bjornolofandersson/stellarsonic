---
import { getCollection } from 'astro:content';
import Index from '@theme/layouts/index.astro';
import Page from '@theme/layouts/Page.astro';
import HomeEditor from '@components/editor/HomeEditor.svelte';
import * as settings from '@settings';

const posts = await getCollection('mixes');
const sortedPosts = posts.sort((a, b) => {
  //return b.data.date.localeCompare(a.data.date);
  return 1;
});
const isDev = import.meta.env.MODE === 'development';
---

<Page>
  {isDev ?
    <HomeEditor settings={settings} client:only>
      <Index posts={sortedPosts} />
    </HomeEditor>
  :
    <Index posts={sortedPosts} />
  }
</Page>
