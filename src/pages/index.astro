---
import { getCollection } from 'astro:content';
import Featured from '../components/Featured.astro';
import Recent from '../components/Recent.astro';
import SiteHero from '../components/SiteHero.astro';
import Layout from '../layouts/Layout.astro';
import * as site from '../settings.yaml';


const posts = await getCollection('mixes');
const sortedPosts = posts.sort((a, b) => {
  return b.data.date.localeCompare(a.data.date);
});

const [featured, ...rest] = sortedPosts;
---

<Layout title={site.title}>
  <SiteHero />
	<Featured post={featured} />
	<Recent posts={rest.slice(0, 3)} title="Recent mixtapes" icon="graphic_eq"/>
</Layout>
