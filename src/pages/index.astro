---
import Featured from '../components/Featured.astro';
import Recent from '../components/Recent.astro';
import SiteHero from '../components/SiteHero.astro';
import Layout from '../layouts/Layout.astro';
import * as site from '../settings.yaml';

const sourcePosts = await Astro.glob('./**/*.md');
const posts = sourcePosts
	.filter(p => p.url != null && p.url != '')
	.sort((a, b) => {
		return b.frontmatter.date.localeCompare(a.frontmatter.date);
	});

const [featured, ...rest] = posts;
---

<Layout title={site.title}>
  <SiteHero />

	<Featured post={featured} />
	<Recent posts={rest.slice(0, 2)}/>
</Layout>
